<div class="table-header">
  <h2>{{@title}}</h2> <a href="{{this.csv}}">Export to CSV</a>
</div>

<table class="table">
  <tr>
    {{#each @data.header as |header index|}}
      <th {{on "click" (fn this.sortColumn index)}}>
        {{header}}
        &nbsp;
        {{#if (eq index this.currentSelectedColumn)}}
          {{#if (eq index this.lastSelectedColumn)}}
            <FaIcon @icon="chevron-up" @size="1x"/>
          {{else}}
            <FaIcon @icon="chevron-down" @size="1x"/>
          {{/if}}
        {{/if}}
      </th>
    {{/each}}
  </tr>
  {{#if @data.body}}
    {{#each @data.body as |items|}}
      <tr>
        {{#each items as |item|}}
          {{#if item.linkRoute}}
            <td>
              <LinkTo
                @route={{item.linkRoute}}
                @model={{item.linkModel}}
              >
                {{item.text}}
              </LinkTo>
            </td>
          {{else if item.tag}}
            <td>
              <TableTag @tag={{item.tag}} @text={{item.text}}/>
            </td>
          {{else}}
            <td>{{item}}</td>
          {{/if}}
        {{/each}}
      </tr>
    {{/each}}
  {{else}}
    <tr>
      <td class="text-center" colspan={{this.header.length}}>
        {{@empty}}
      </td>
    </tr>
  {{/if}}
</table>
