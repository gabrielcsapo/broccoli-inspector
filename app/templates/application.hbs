<Progressbar @currentStep={{this.currentNode}} @isBuilding={{this.isBuilding}} @currentBuildTime={{this.currentBuildTime}} />

<div class="container">
  <div class="flex-grid">
    <div class="sidebar">
      {{#if this.isBuilding}}
        Broccoli is building
      {{else}}
        <div class="text-center p2">
          <input
            class="form--search"
            type="text"
            name="Search for any value a node might contain"
            value={{@model.searchTerm}}
            {{on "change" this.search}}
          />

          <label for="group-plugins">Group Plugins by Type</label>
          <input id="group-plugins" type="checkbox" checked={{this.groupPlugins}} {{on "change" this.toggleGroupingPlugins}}>
        </div>

        {{#if this.pluginType}}
          <div class="plugin-selected">
            {{this.pluginType}}
            <button
              class="plugin-selected--clear"
              {{on "click" (fn this.selectPluginGroup "")}}
            >X</button>
          </div>
        {{/if}}

        <ul class="node-list">
          {{#if @model.nodesByType}}
            {{#each @model.nodesByType key="@index" as |node idx|}}
              <li class="node-list--items">
                <a href="#" {{on "click" (fn this.selectPluginGroup node.label)}}>
                    ({{to-fixed node.time 3}}ms) {{node.label}}
                </a>
              </li>
            {{/each}}
          {{else if @model.nodes}}
            {{#each @model.nodes key="@index" as |node idx|}}
              <li class="node-list--items">
                <LinkTo @route="node" @model={{node.id}}>
                    ({{to-fixed node.buildState.selfTime 3}}ms) {{node.label}}
                </LinkTo>
              </li>
            {{/each}}
          {{else}}
            Could not find any nodes for your search
          {{/if}}
        </ul>
      {{/if}}
    </div>
    <div class="main">
      {{#if this.isBuilding}}
        Broccoli is building
      {{else}}
        {{outlet}}
      {{/if}}
    </div>
  </div>
</div>
